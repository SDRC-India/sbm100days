{"version":3,"sources":["ng://sdrc-table/src/table/table.component.ts","ng://sdrc-table/src/sort-pipe.pipe.ts","ng://sdrc-table/src/search-pipe.pipe.ts","ng://sdrc-table/src/table.module.ts"],"names":["TableComponent","EventEmitter","prototype","ngOnInit","ngOnChanges","_this","this","rowData","isPaginate","itemsPerPage","length","setTimeout","headerFixed","setDuplicateFixedTable","maxTableHeight","$","id","css","appendHttp","link","startsWith","sort","property","isDesc","columns","direction","fixTableConfig","headerHeight","height","width","closest","parent","scrollWidth","clientWidth","find","fixTableHeader","event","offset","target","scrollTop","scrollLeft","hide","tableToExcel","tab_text","j","tab","document","getElementById","innerHTML","replace","save","Blob","type","excelName","getType","x","createPdf","containerId","tempHeight","sorting","saveAs","pdfName","actionClicked","btnClass","rowObj","emittedData","onActionButtonClicked","emit","downloadPdfByServerClicked","tableId","tableData","table","onDownloadPdfByServerClicked","downloadExcelByServerClicked","onDownloadExcelByServerClicked","Component","args","selector","template","Input","Output","SortPipePipe","transform","undefined","a","b","rowdataA","parseInt","rowdataB","isNaN","Pipe","name","SearchPipePipe","searchText","toLowerCase","filter","details","values","i","Object","element","push","JSON","stringify","includes","TableModule","NgModule","imports","CommonModule","FormsModule","NgxPaginationModule","Ng2SearchPipeModule","PDFExportModule","declarations","providers","exports"],"mappings":"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","sourcesContent":["import { Component, OnInit, Input, OnChanges, Output, EventEmitter } from '@angular/core';\nimport { PaginatePipe } from 'ngx-pagination';\nimport { saveAs } from '@progress/kendo-drawing/pdf';\nimport save from 'save-as';\ndeclare var $: any;\n\n@Component({\n  selector: 'sdrc-table',\n  templateUrl: './table.component.html',\n  styleUrls: ['./table.component.scss']\n})\nexport class TableComponent implements OnInit, OnChanges {\n  isDesc: any;\n  direction: number;\n  fixTableConfig: any = {};\n  checkStatus: boolean = false;\n  disableDeleteBtn: boolean = true;\n  columns: any;\n\n  p: number = 1;\n  searchFilter: string;\n  @Input() id: string;\n  @Input() rowData: any[];\n  @Input() columnData: any[];\n  @Input() maxTableHeight: string;\n\n\n  //keys for sorting and exclude sorting column from table-sorting.directive\n  @Input() sorting: boolean;\n  @Input() sortExcludeColumn: string[];\n\n  //keys for paginate and itemsPerpage from table-paginate.directive\n  @Input() isPaginate: boolean = false;\n  @Input() itemsPerPage: number;\n\n  //isHeaderFixed from table-headerfix.directive\n  @Input() headerFixed: boolean = false;\n\n  //searchBox from table-searchBox.directive.ts\n  @Input() searchBox: boolean = false;\n\n  //download Pdf and Excel table-downloadPdf.directive and table-downloadExcel.directive\n  @Input() downloadPdf: boolean = false;\n  @Input() pdfName: string;\n  @Input() downloadExcel: boolean = false;\n  @Input() excelName: string;\n\n  //download pdf and excel by server side\n  @Input() downloadPdfByServer:boolean = false;\n  @Input() downloadExcelByServer:boolean = false;\n\n  @Output() onActionButtonClicked: EventEmitter<any> = new EventEmitter<any>();\n  @Output() onDownloadPdfByServerClicked: EventEmitter<any> = new EventEmitter<any>();\n  @Output() onDownloadExcelByServerClicked: EventEmitter<any> = new EventEmitter<any>();\n  constructor() {\n  }\n\n  ngOnInit() { }\n\n  ngOnChanges() {\n    if (this.rowData && !this.isPaginate)\n      this.itemsPerPage = this.rowData.length;\n    setTimeout(() => {\n      if (this.headerFixed)\n        this.setDuplicateFixedTable();\n      if (this.maxTableHeight) {\n        $('#table-fixed-container' + this.id).css(\"max-height\", this.maxTableHeight)\n      }\n    })\n\n  }\n\n  appendHttp(link: string) {\n    if (!link.startsWith('http')) {\n      return 'http://' + link;\n    }\n    else {\n      return link;\n    }\n  }\n  sort(property) {\n    this.isDesc = !this.isDesc; //change the direction    \n    this.columns = property;\n    this.direction = this.isDesc ? 1 : -1;\n  };\n\n\n\n\n  setDuplicateFixedTable() {\n    // $(\"#header-fixed\").html(\"\");\n    this.fixTableConfig.headerHeight = $(\"#\" + this.id + \" > thead\").height();\n    this.fixTableConfig.width = $('#' + this.id).closest(\".parent-tabl-container\").width();\n    // this.fixTableConfig.header = $(\"#org-full-data > thead\").clone();\n    // this.fixTableConfig.body = $(\"#org-full-data > tbody\").clone();\n    // this.fixTableConfig.fixedHeader = $(\"#header-fixed\").append(this.fixTableConfig.header);\n    // this.fixTableConfig.table = $(\"#header-fixed\").append(this.fixTableConfig.body);\n    $(\"#header-fixed\" + this.id).height(this.fixTableConfig.headerHeight)\n    $(\"#header-fixed\" + this.id).width(this.fixTableConfig.width - 16)\n    if($(\"#\"+this.id).parent()[0].scrollWidth == $(\"#\"+this.id).parent()[0].clientWidth){\n      $(\"#header-fixed\" + this.id).find(\"th\").width($(\"#header-fixed\" + this.id).find(\"th\").width() + (($(\"#header-fixed\" + this.id).width() - $(\"#header-fixed\" + this.id).find(\"thead\").width())/$(\"#header-fixedtab1 th\").length))\n    }\n  }\n\n  fixTableHeader(event) {\n    var offset = $(event.target).scrollTop();\n    $(\"#header-fixed\" + this.id).scrollLeft($(event.target).scrollLeft())\n    if (offset >= this.fixTableConfig.headerHeight) {\n      $(\"#header-fixed\" + this.id).css(\"display\", \"block\");\n    }\n    else if (offset < this.fixTableConfig.headerHeight) {\n      $(\"#header-fixed\" + this.id).hide();\n    }\n  }\n\n  tableToExcel(id) {\n    // console.log(table);\n    let itemsPerPage = this.itemsPerPage;\n    this.itemsPerPage = this.rowData.length;\n    // setTimeout(()=>{\n    //   let uri = 'data:application/vnd.ms-excel;base64,'\n    //     , template = '<html xmlns:o=\"urn:schemas-microsoft-com:office:office\" xmlns:x=\"urn:schemas-microsoft-com:office:excel\" xmlns=\"http://www.w3.org/TR/REC-html40\"><head><!--[if gte mso 9]><xml><x:ExcelWorkbook><x:ExcelWorksheets><x:ExcelWorksheet><x:Name>{worksheet}</x:Name><x:WorksheetOptions><x:DisplayGridlines/></x:WorksheetOptions></x:ExcelWorksheet></x:ExcelWorksheets></x:ExcelWorkbook></xml><![endif]--><meta http-equiv=\"content-type\" content=\"text/plain; charset=UTF-8\"/></head><body><table>{table}</table></body></html>'\n    //     , base64 = function(s) { return window.btoa(decodeURIComponent(encodeURIComponent(s))) }\n    //     , format = function(s,c) { return s.replace(/{(\\w+)}/g, function(m, p) { return c[p]; }) }\n    //   if (!table.nodeType) table = document.getElementById(table)\n    //    var ctx = {worksheet: name || 'Worksheet', table: table.innerHTML}\n    //    window.location.href = uri + base64(format(template, ctx))\n    //    setTimeout(()=>{\n    //     this.itemsPerPage = itemsPerPage;\n    //    },1000)\n    // }, 200)\n    setTimeout(() => {\n      var htmls = \"\";\n      var uri = 'data:application/vnd.ms-excel;base64,';\n      var template = '<html xmlns:o=\"urn:schemas-microsoft-com:office:office\" xmlns:x=\"urn:schemas-microsoft-com:office:excel\" xmlns=\"http://www.w3.org/TR/REC-html40\"><head><!--[if gte mso 9]><xml><x:ExcelWorkbook><x:ExcelWorksheets><x:ExcelWorksheet><x:Name>{worksheet}</x:Name><x:WorksheetOptions><x:DisplayGridlines/></x:WorksheetOptions></x:ExcelWorksheet></x:ExcelWorksheets></x:ExcelWorkbook></xml><![endif]--></head><body><table>{table}</table></body></html>';\n      var base64 = function (s) {\n        return window.btoa(unescape(encodeURIComponent(s)));\n      };\n\n      var format = function (s, c) {\n        return s.replace(/{(\\w+)}/g, function (m, p) {\n          return c[p];\n        });\n      };\n\n      var tab_text = \"<table border='2px'>\";\n      var textRange; var j = 0;\n      let tab = document.getElementById(id); // id of table\n\n      for (j = 0; j < tab['rows'].length; j++) {\n        if (j == 0)\n          tab_text = tab_text + \"<tr style='background-color: #00837F; color: #FFF; font-weight: bold' valign='top'>\" + tab['rows'][j].innerHTML + \"</tr>\";\n        else\n          tab_text = tab_text + \"<tr valign='top'>\" + tab['rows'][j].innerHTML + \"</tr>\";\n        //tab_text=tab_text+\"</tr>\";\n      }\n\n      tab_text = tab_text + \"</table>\";\n      tab_text = tab_text.replace(/<A[^>]*>|<\\/A>/g, \"\");//remove if u want links in your table\n      tab_text = tab_text.replace(/<img[^>]*>/gi, \"\"); // remove if u want images in your table\n      tab_text = tab_text.replace(/<input[^>]*>|<\\/input>/gi, \"\"); // reomves input params\n\n\n      var ctx = {\n        worksheet: 'Worksheet',\n        table: tab_text\n      };\n      save(new Blob([tab_text], { type: \"application/vnd.ms-excel\" }), this.excelName + \".xls\");\n      setTimeout(()=>{\n            this.itemsPerPage = itemsPerPage;\n           },500)\n    }, 200)\n\n\n  }\n  \n  getType(x){\n    return typeof x;\n  }\n\n  createPdf(target, containerId) {\n    let tempHeight = $(\"kendo-pdf-export\").find(\"#\" + containerId).css(\"max-height\");\n    let itemsPerPage = this.itemsPerPage;\n    let sorting = this.sorting;\n    this.itemsPerPage = this.rowData.length;\n    this.sorting = false;\n    $(\"kendo-pdf-export\").find(\"#\" + containerId).scrollTop(0)\n    setTimeout(() => {\n      $(\"kendo-pdf-export\").find(\"#\" + containerId).css(\"max-height\", \"none\")\n      target.saveAs(this.pdfName + \".pdf\")\n      setTimeout(() => {\n        this.itemsPerPage = itemsPerPage;\n        this.sorting = sorting;\n        $(\"kendo-pdf-export\").find(\"#\" + containerId).css(\"max-height\", tempHeight)\n      }, 1000);\n    }, 200)\n  }\n\n  public actionClicked(btnClass, rowObj): void {\n    let emittedData: any = {target: btnClass, rowObj: rowObj};\n    this.onActionButtonClicked.emit(emittedData);\n  }\n\n  public downloadPdfByServerClicked(tableId, tableData): void {\n    let emittedData: any = {table: tableId, tableData: tableData};\n    this.onDownloadPdfByServerClicked.emit(emittedData);\n  }\n  public downloadExcelByServerClicked(tableId, tableData): void {\n    let emittedData: any = {table: tableId, tableData: tableData};\n    this.onDownloadExcelByServerClicked.emit(emittedData);\n  }\n}\n","import { Pipe, PipeTransform } from '@angular/core';\n\n@Pipe({\n  name: 'sortPipe'\n})\nexport class SortPipePipe implements PipeTransform {\n\ntransform(rowData: any[], args: any): any {\n    if (rowData != undefined && rowData != null){\n     return rowData.sort(function(a, b){\n      let rowdataA = parseInt(a[args.property]);\n      let rowdataB = parseInt(b[args.property]);\n        if(isNaN(rowdataA) && isNaN(rowdataB)){\n            if(a[args.property] < b[args.property]){\n                return -1 * args.direction;\n            }\n            else if(a[args.property] > b[args.property]){\n                return 1 * args.direction;\n            }\n            else{\n                return 0;\n            }\n        }else if(!isNaN(rowdataA) && !isNaN(rowdataB)){\n            if(rowdataA < rowdataB){\n                return -1 * args.direction;\n            }\n            else if(rowdataA > rowdataB){\n                return 1 * args.direction;\n            }\n            else{\n                return 0;\n            }\n        }\n      });\n    }\n  };\n}\n","import { Pipe, PipeTransform } from '@angular/core';\n\n@Pipe({\n  name: 'searchPipe'\n})\nexport class SearchPipePipe implements PipeTransform {\n\n  transform(tableData: any[], searchText: string): any[] {\n    if (!tableData) return [];\n    if (!searchText) return tableData;\n    searchText = searchText.toLowerCase();\n    return tableData.filter(details => {\n     // return details.toLowerCase().includes(searchText);\n      //let values = Object.values(!noSearch.includes(details));\n      let values = [];\n      for (let i = Object.values(details).length-1; i >= 0; i--) {\n        const element = Object.values(details)[i];\n        if(typeof element != 'object'){\n          values.push(element)\n        }\n      }\n      return JSON.stringify(values).toLowerCase().includes(searchText);\n    });\n  }\n}\n\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { TableComponent } from './table/table.component';\nimport { NgxPaginationModule, PaginatePipe } from 'ngx-pagination';\nimport { Ng2SearchPipeModule} from 'ng2-search-filter'; \nimport { FormsModule } from '@angular/forms';\nimport { SearchPipePipe } from './search-pipe.pipe';\nimport { PDFExportModule } from '@progress/kendo-angular-pdf-export';\nimport { SortPipePipe } from './sort-pipe.pipe';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    NgxPaginationModule,\n    Ng2SearchPipeModule,\n    PDFExportModule\n  \n  ],\n  declarations: [TableComponent, SearchPipePipe,SortPipePipe],\n\n  providers: [],\n  exports: [TableComponent, SearchPipePipe, SortPipePipe]\n})\nexport class TableModule {\n  // public static forRoot(config): ModuleWithProviders {\n  //   return {\n  //     ngModule: TableModule,\n  //     providers: [\n  //       TableService,\n  //       { provide: 'config', useValue: config }\n  //     ]\n  //   };\n  // }\n}\n"]}